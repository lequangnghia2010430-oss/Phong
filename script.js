const message = `...Có lẽ việc xuất hiện như thế này quá đột ngột, Phong dạo này có ổn không?Tui đoán là Phong chắc sẽ thấy ổn hơn sau đợt im lặng đó rồi nhỉ. Nhưng mà Nhung thật sự vẫn không ổn tí nào cả, Nhung áy náy lắm, tự trách tại sao lúc đó lại làm vậy với Phong, muốn nói rằng thời gian bên Phong rất vui, Nhung lần đầu cảm nhận rõ ràng cảm giác được quan tâm, dõi theo nhiều đến thế nào.Mặc dù thời gian của 2 ta không đủ nhiều để làm thước đo tình cảm mà Phong dành cho Nhung lúc đó,thật sự tui đã rung động trước sự chân thành bạn dành cho tui. Nhưng tui sợ, sợ khi mình đến quá vội vàng, lại không thể hiểu nhau, dễ rạn nứt, sợ khi khoảng cách 2 đứa xa nhau, lại không đủ kiên nhẫn bên nhau, sợ rằng khi tính cách cọc cằn làm Phong chịu nhiều tổn thương. Thật ra Nhung cũng cảm thấy sợ chính bản thân mình, cảm thấy không xứng với tình cảm đó và không dũng cảm giữ lại. Những nổi sợ dè dặt khiến Nhung chọn cách né tránh, làm Phong khó chịu và bị tổn thương, đẩy Phong ra xa nhưng khi Phong muốn rời đi thì Nhung không chịu được, cảm giác sợ bị bỏ rơi khiến Nhung phải níu kéo Phong trở về hết lần này lần khác. Vậy mà lúc Phong ở lại tui vẫn không biết trân trọng. Thật sự khi Phong đang hứng thú nói chuyện với Nhung thì Nhung bắt đầu cọc cằn  và xả hết đống cảm xúc tiêu cực lên Phong, từ đó nảy ra những cuộc cãi vả. Sau lần cãi vả cuối, Phong bảo Nhung hãy buông tha cho Phong. Lúc đó tui rất giận, giận vì trong lúc cãi vả Nhung cũng bị tổn thương rất nhiều, nhưng rồi Nhung nhận ra người thật sự tổn thương nhiều nhất lại là Phong, Phong không xứng đáng bị như thế, Phong là người ngọt ngào, giàu tình cảm, và quá tốt với Nhung, thật sự đáng lẽ Phong không nên bị chịu tổn thương đến vậy . Nói sao ta, Nhung thật sự không quên Phong, Nhung nhớ cảm giác ngại ngùng những lần nhìn thấy Phong trên lớp sau lời thổ lộ Phong nói tối qua, nhớ giọng nói, bóng lưng và thật sự nhớ nụ cười của Phong, thật sự Nhung thấy Phong cười đẹp lắm. Hì hì tự nhiên nhớ ghê, nhớ hồi lớp 7 thấy Phong trầm tính cực kì, mà bị ấn tượng bởi Phong nói giọng bắc, làm Nhung nhớ tới giọng mẹ Nhung, xong lên lớp 8 thấy Phong cởi mở hơn trước, hài hơn Nhung nghĩ.Lên lớp 9 thì ghẹo Phong xong Phong chạy cái lúc đó ghẹo hoài luôn, nhắn tin với Phong bị mẹ thu điện thoại xong mẹ đọc tin nhắn thấy Nhung bảo Phong gay xong chửi quá trời nữa=)) vậy mà lúc đó Nhung xem Phong là bạn thôi à, đến cuối năm Nhung mới nhận ra được tình cảm của Phong, Phong kể ra những lần Phong lo khi thấy Nhung buồn thì thật sự Nhung bất ngờ lắm, vì có khi mấy đứa bạn còn không để ý nữa. Tự nhiên hoài niệm ghê. Phong như cục bột ấy, toàn để Nhung trút tiêu cực lên thôi... thật sự Nhung vẫn luôn soi tiktok của Phong, thấy từ lúc Phong xóa tài khoản đến khi khôi phục lại, chặn rồi bỏ chặn, và cuối cùng là chặn..Lên môi trường mới, Nhung muốn quên đi chuyện trước đó của 2 ta, Nhung chọn cách quên để né tránh đi con người tồi tệ của Nhung lúc trước, không chấp nhận thậm chí là sợ bản thân. Nhưng Nhung không làm được, có khoảng thời gian Nhung đã đăng nhật kí và thấy Phong vào xem, lúc đó mọi sự áy náy và tội lỗi tràn về. Nhung thật sự suy nghĩ liệu Phong có hận có ghét Nhung không, và tự dàn vặt bản thân, tự hỏi rằng nếu như lúc đó mình không làm vậy thì cả 2 có thể sẽ hạnh phúc hơn không nhỉ? Và trên đời làm gì có nếu như, Nhung vẫn phải chấp nhận sự thật rằng mối quan hệ của 2 đứa mình không còn cứu vãn được nữa rồi, tụi mình xa nhau thật rồi. Cảm giác lúc trước nhắn tin với Phong là thói quen, mở điện thoại lên là thấy những tin nhắn quan tâm và hỏi han, Phong là chỗ dựa, là nơi Nhung tâm sự về áp lực hay nỗi buồn và chia sẻ về sở thích, không hiểu sao hồi đó Phong có thể lắng nghe Nhung kể về chuyện tình drama rối rắm của ladybug và catnoir được:)). Bỗng nhiên cảm thấy Nhung cũng là người quan trọng với một ai đó, thật sự nhiều lúc Nhung cũng ước có cơ hội được làm lại, nếu lúc đó Nhung dũng cảm để giữ Phong lại hay Nhung dứt khoát cho Phong rời đi từ sớm thì 2 đứa sẽ không tổn thương nhau đến thế. Có lẽ bây giờ Phong sẽ sống rất ổn rất vui khi có thể tự mình dứt khoát rời đi, Nhung hiểu mà, hiểu rằng Phong cũng có giới hạn, hiểu rằng Phong cũng cần phải yêu thương bản thân hơn vì không thể dính líu đến người không phù hợp nên mới chọn cách rời đi như vậy. Thật sự không biết xin lỗi Phong như nào cho đủ, nhưng trên là những lời thật lòng và chân thành Nhung muốn nói với Phong, có lẽ Nhung đã hết vai diễn trong cuộc đời Phong rồi.Chúc Phong luôn hạnh phúc nha. À đúng rồi, và những kỉ niệm bên Phong Nhung sẽ trân trọng, với lại Nhung không hối hận hay ghét Phong đâu nhaa hì hì. Có lẽ sẽ hơi thừa nhưng mà Nhung mong cục bột hãy yêu thương bản thân hơn nhaa.

    ${' '.repeat(70)} Nhung
`;

function showLetter() {
  document.getElementById("introText").style.opacity = 0;
  document.querySelector(".btn").style.display = "none";

  setTimeout(() => {
    const letterBox = document.getElementById("letterBox");
    const typedText = document.getElementById("typedText");
    letterBox.style.display = "block";
    let i = 0;

    function typeWriter() {
      if (i < message.length) {
        typedText.innerHTML += message.charAt(i);
        i++;
        setTimeout(typeWriter, 20);
      } else {
        // Sau khi gõ xong thư, hiển thị chữ An và bắt đầu hiệu ứng trái tim
        document.getElementById("targetName").style.opacity = 1; 
        startHeartAnimation();
      }
    }

    typeWriter();
  }, 600);
}


// Hàm tạo trái tim và thêm vào trang
function createHeart() {
  const heart = document.createElement('div');
  heart.classList.add('heart');
  
  const heartContainer = document.getElementById('heartContainer');
  // Vị trí ngẫu nhiên ở cuối bức thư hoặc dưới màn hình
  const letterBox = document.getElementById('letterBox');
  const letterRect = letterBox.getBoundingClientRect();

  // Tạo trái tim từ vị trí của chữ ký
  const signature = document.querySelector('.signature');
  const signatureRect = signature.getBoundingClientRect();
  
  heart.style.left = `${signatureRect.left + signatureRect.width / 2 + (Math.random() * 40 - 20)}px`; // Vị trí ngang gần chữ ký
  heart.style.top = `${signatureRect.bottom - 20}px`; // Bắt đầu từ gần chữ ký

  heartContainer.appendChild(heart);

  // Kích hoạt animation sau khi trái tim được thêm vào DOM
  setTimeout(() => {
    heart.style.animation = `animateHeart 4s ease-out forwards`;
    heart.style.opacity = 1;
  }, 10); // Một chút delay để trình duyệt kịp render

  // Xóa trái tim sau khi animation kết thúc để tránh làm đầy DOM
  heart.addEventListener('animationend', () => {
    heart.remove();
  });
}

// Hàm bắt đầu tạo trái tim liên tục
let heartInterval;
function startHeartAnimation() {
  // Tạo một trái tim ngay lập tức
  createHeart();
  // Tạo các trái tim tiếp theo sau mỗi 500ms
  heartInterval = setInterval(createHeart, 500); 
}

// Đảm bảo dừng animation khi không cần thiết (ví dụ: khi rời trang)
window.addEventListener('beforeunload', () => {
  clearInterval(heartInterval);
});